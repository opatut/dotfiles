#!/bin/bash

DMENU=/home/paul/.bin/dmenu

if [[ "$1" == "" || "$1" == "off"  ]]; then
    sudo netctl stop-all
    sudo systemctl stop netctl-auto@wlan0.service
elif [[ "$1" == "auto" ]]; then
    sudo netctl stop-all
    sudo systemctl start netctl-auto@wlan0.service
elif [[ "$1" == "menu" ]]; then
    CHOICE=$((echo auto; find /etc/netctl -maxdepth 1 -type f -printf '%P\n'; echo off) | $DMENU)
    [ -n "$CHOICE" ] && $0 "$CHOICE"
else
    sudo systemctl stop netctl-auto@wlan0.service
    sudo netctl stop-all
    sudo netctl start $1
fi
